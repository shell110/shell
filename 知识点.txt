购买实体服务器==>> 做raid5-->>安装系统-->>服务初始化
初始化脚本
数据库服务器(A)
队列服务器(B)
应用服务器 web服务  文件服务（C）



硬盘灯亮红色，意味着faild状态，已经损坏，要看机器是什么
raid阵列级别，才可确认是否能够保留数据，如IDC机房托管  公有云服务器  Linux 操作系统最小化英文   服务器 U 为单位 PDU电源  走线槽 机柜（架） 内外网交换机 7到10台服务器     机房值守
IDC服务器托管
1首先联系供应商购买机柜
2机房开通机架位置
3机房加电
4你的服务器采购及上架--安装系统--搭建服务 ==

yum -y install  安装服务
ntpdate cn.pool.ntp.org
systemctl status firewalld 查看防火墙状态
sysremctl  restart firewalld 重启防火墙      
service?confluence stop                
systemctl stop firewalld 关闭防火墙
systemctl enable  firewalld  开机启动防火墙
systemctl disable firewalld   开机关闭防火墙
setenforce 0      selinux 临时关闭
 vi /etc/sysconfig/selinux
SELINUX=enforcing 改为?SELINUX=disabled

yum provides vim  查询命令
yum -y install vim  编辑器
yum -y reinstall epel-release 重安装扩展源
yum -y install expat-devel    安装扩展库
yum -y groupinstall "Development Tools" 开发工具包
yum -y install lrzsz    rz上传 sz下载
yum -y install unzip-6.0-19.el7.x86_64   rpm
yum -y remove psmisc-22.20-15.el7.x86_64   卸载 
yum clean all  清除本机yum缓存
yum makecache  创建缓存
yum -y install gcc make zlib-devel pcre pcre-devel openssl-devel    安装源码包环境
rpm -ivh ntfs-3g-2013.1.13-5.el7.x86_64\(1\).rpm
 压缩包安装
rpm -qa | grep ntfs   检测是否安装成功
rpm -e ntfs-3g        卸载

./configure --prefix=/usr/local/nginx 安装路径
            --with-xxx=/usr/local
make && make install  编译

tar  -czf tmp.tar.gz /tmp/
压缩  格式  文件名    文件
tar xf tmp.tar.gz -C 目录
解压
        

1怎么登陆windows 服务器 （不常用）
下载及使用 （远程桌面）
2在远程桌面上直接输入 Windows server 的IP 地址 即可登陆
怎么登陆交换机 去做网络配置？
  1 ssh 交换机的跳板机（linux服务器)
  2使用telnet ip 地址（ 交换机的IP ）去登陆交换机的跳板机  和服务器的跳板机不是一个
  
1连接不上虚拟机了怎么办？
1、虚拟机是否开启
2、确认ip
3、确认ssh服务是否开启 
systemctl  restart sshd  开启服务(network)网络
systemctl  stop sshd     关闭服务

ipconfig  windows查看IP地址
lsattr 查看文件属性
2ssh和telnet有啥区别？
telnet：不安全，没有对传输数据进行加密，容易被监听，还有遭受中间人攻击，telnet不能压缩传输数据，所以传输慢
ssh：对数据进行了加密，安全性高，ssh传输数据经过压缩的，所以传输速度比较快。

3 centos7.3和 cengtos6.5 redhat 有什么区别
1内核版本
*2启动加载器
*3防火墙*       iptables（centos6）firewalld（centos7）
4默认数据库     mysql（centos6）mariadb（centos7）
5文件结构
6主机名
*7服务相关       service xx restart 和systemctl restart xx
将你的网络服务重新启动
 systemctl  restart network
 systemctl  stop network
  DHCP是什么？
  动态主机配置协议
  主要目的是为了方便我们主机IP地址的配置，如网络中存在大量主机时，可部署DHCP协议由DHCP服务器分配地址给主机。
  请了解专业术语及架构
  client 客户端
  cdn 加速 ：内容分发网络
  firewall : 防火墙
  wiki : 多人协作的写作系统
  dr 负载均衡器
  pxe服务器： 批量安装操作系统，初始化使用服务器
  ansidle:统一部署
  zabbix :监控服务器
  ELK 开源实时日志分析平台
  ips : 入侵防御系统
  ids 入侵检测系统
  CMDB 资产管理系统
9.请问你是怎么优化Linux系统的？
  1.不应root，添加普通用户，通过sudo授权管理
2.更改默认的远程连接SSH服务端口及禁止root用户连接
3.定时自动更新服务器时间
4.配置yum更新源
5.关闭selinux及iptabie/firewalld
6.定时清理垃圾文件，防止inodes节点被占满
7.精简开机启动服务
8.系统级内核优化

请简述linux系统开机启动过程
1加电
2加载BIOS设置
3加载grub
4加载内核系统到内存中
5加载配置文件
6加载内核模块
7完成相应的初始化工作和启动相应的服务
8启动系统进程
9出现登陆界面
10开机启动完成

有名员工离职了 你作为一名工程师 需要做什么
1首先删除通道机登陆权限
2删除CMDB系统（资产管理系统）或者EXCEL表格中服务器的管理员名字，将服务器过户到同组人员
3删除所有服务器的登陆权限，及sudoers文件中的内容
4联系邮箱管理员K 删除邮箱

同事可以直接删除（添加）其他同事的权限及sudoer 权限
新员或者老员工添加登陆服务器权限及sudo权限，需要自己申请账号 工单（提案，case)
经过领导审批后，相关工程师才可以添加或删除

ping -c 5000  -i 0.000000000000000003 www.baidu.com
快速ping 5000次 企业测试是否丢包
必须登陆服务器去ping网关（xx.x.x.1)虚拟机是.2

linux 服务器被入侵的症状，并且怎么去做？
被入侵后的服务器会消耗非常高的资源，尤其是CPU等，可以用此机器挖矿，发送垃圾邮件，消耗宽带发动DOS攻击
表现：服务器变慢，跑网页的话（WED），网站打开缓慢

如果你发现坏蛋的登陆你的机器了 ，你怎么做
ps aux
top
lsof
kill -9
killall
paill -u
pa aux --sort
ps -ef

被黑客登陆到机器了，你怎么做
W 查看当前有谁登陆在服务器上
last  查看谁曾经登陆过服务器
回顾下历史命令，看看坏蛋执行了什么 ?
vim ~/.bash_history  ls -a (显示隐藏文件）
如果被删了，遇到高手了，仔细检查机器
检查哪些进程在消耗CPU(找出高的)  --sort
检查网络连接
此时不要去打草惊蛇，T掉坏蛋
怎么去做？
只允许你的IP登陆SSH（作业2）
封禁除此之外的任何东西，不仅仅是SSH，
包括任何端口上的任何协议
创建防火墙规则，然后kill掉 坏蛋的进程。
简单粗糙的方法： systemctl stop network  还有关机 拔网线

ps
分出主分区后，其余的部分可以分成扩展分区，一般是剩下的部分全部分成扩展分区，也可以不全分，剩下的部分就浪费了。
。扩展分区不能直接使用，必须分成若干逻辑分区。所有的逻辑分区都是扩展分区的一部分。
硬盘的容量=主分区的容量+扩展分区的容量；
扩展分区的容量=各个逻辑分区的容量之和。

在Linux系统下（其他操作系统也有类似规定），磁盘的分区大致可以分为三类，分别为主分区，扩展分区和逻辑分区等等。Linux系统管理员在部署系统时，必须要对这3个分区进行一个合理的规划，否则的话会浪费宝贵的硬盘空间。

通常情况下，一个硬盘中最多能够分割四个主分区因为硬盘中分区表的大小只有64Bytes，而分割一个分区表大小限制，硬盘只能够给四个主分区。如果此时一个硬盘有120G，而管理员划分了4个主分区，每个主分区的空间为20个G.那么总共才用去了80G的空间。这块硬盘剩余的40G空间就将无法使用。这显然浪费了硬盘的空间。
为了突破这最多4个主分区的限制，linux系统引入了扩展分区的概念。及管理与可以把一个主分区设置为扩展分区（注意只能够使用一个扩展分区来进行扩充。而在扩充分区下，又可以建立多个逻辑分区，也就是说，扩展分区是无法直接使用的，必须在细分成逻辑分区才可以用来存储数据。通常情况下，逻辑分区的起始位置及结束位置记录在每个逻辑分区的第一个扇区，这也叫做扩展分区表，再扩展分区下，系统管理员可以根据实际情况建立多个逻辑分区，将一个扩展划割成多个区域来使用
所以在扩展分区与逻辑分区的帮助下，一块硬盘可以被划分为6个，七个甚至更多的分区。有时候由于磁盘限额的需要要给不同的用户或者应用对应不同的分区。用户主目录的规划，这也需要用到一个独立的分区。股系统管理员需要在部署系统之前，想考虑一下系统到底分几个区合适。故硬盘分区空间该如何规划。
 软链接和硬链接的区别：
 
 硬链接不会创建新的inode，只给源文件多加一个文件名。软链接创建新的inode,相当重新创建一个文件，
 硬链接不能跨分区，软链接可以跨分区；
 硬链接删除源文件后，另一个文件能用。
 软链接删除文件后，连接文件不能再用
 
 
注意：
pv不能跨越vg
Lv不能跨越vg
系统中可以创建多个vg
vp中可以创建多个lv

跟我说说你接触过的服务器都是什么样的？
我接触过HP的服务器 一般 都是2-4U
最多的可以由4快盘，基本都是2.5寸的，磁盘序列从B1-B24型号一般为HP 380G5--HP380G9   有一些比较老

dell服务器一般是2U的 大部分只有6快盘，
磁盘容量为 300G  500G  750G    1T    2T
全部都用过 型号为 dell r710 dell r720
还有比较多的国产的，例如lenovo inspur h3c，联想 惠普
但质量都不太好，有点瑕疵。
瑕疵：服务器不稳定，经常异常重启，售后保障不好。有时候新买的服务器会出现开不了机现象，一般故障率为200台坏2台。 

linux系统中一般都有SWAP内存  
好处是 防止内存溢出当内存不够时会使用

企业中Linux服务器系统分区标准是什么（300 G   16G）
/boot 200M
/swap 16G
/70G
/data  全部空间


如果你的操作系统不能创建文件
1磁盘空间满了‘
2inode耗尽
分区损坏，需要修复
硬盘故障
简单的介绍一下linux文件系统（
请说一说ext4文件系统和xgsde q驱别ext4,xfs,fat等等
linux以文件的形式对计算机中数据及资源进行管理。一切接文件】set4支持度管，但是创建文件慢，修复忙而
xfs文件系统： 高容量支持大促被，高性能。
inode是需要时才动态生产

raid0 分为raid单盘0  raid0_single
只需要一块盘，不支持容错，不提供冗余机制。常见于新服务器，只有一块盘，用来安装操作系统及搭建简单服务。

还有raid全盘0
全盘 0一个数据俩个硬盘同时读写，读写速率高，但不支持容错，不提供冗余机制。需要2块硬盘

raid 1
RAID 1镜像卷，一个数据在俩块硬盘里写，空间使用为50%，支持容错。需要2快硬盘。
最多是用来安装操作系统。

raid5+1hot
(hotspare)热备盘
最少需要3块及以上组成RAID5阵列

磁盘的几种状态
online   faild   rebuilding   ready
在线状态   磁盘故障状态  重建（同步）准备好了没有加入到阵列

所有服务器在安装系统之前，必须先做raid.

1请简述raid0 和raid1 raid5的区别

2说说你用的什么raid,为什么？请详细的说说


服务器硬盘如果出现了故障，你怎么做？？
首先查看硬盘灯及硬盘状态，果没有冗余功能的阵列，数据丢失，如果是系统盘损坏，linux系统损坏，需要重装
5

DELL服务器怎么进入RAID卡？
重启过程中，到了位置按 ctrl r

你做RAID 的时候遇到过什么问题？
磁盘状态为forgin 状态，将光标按ctrl n
移动到forgin状态栏，然后按F2  选择clear 回车
清除残留数据，磁盘状态从forgin 状态变回READY,

RAID1+RAID5  前2快盘做RAID1  后面的盘做RAID5
RAID1+SSD_RAD5


yum命令和rpm命令的区别。如果使用rpm安装一个有以来的包
区别：rpm命令安装是，不检查软件包依赖性问题，yum命令安装时可自动处理依赖关系，并且一次安装所有有依赖的包
rpm安装一个有依赖的包；先使用rpm安装这个有依赖的包，按照错误提示，缺少那个包，要先装缺少的包。灯依赖包安装完成后再安此包

exec 和xargs的区别
1 exec
每处理一个文件或者目录，它都需要启动一次 命令，效率不好；
2exec 格式麻烦 ，必须用{}做文件的代为符，必须用 \;
作为命令的结束符，书写不便。
3xargs 不能操作文件名有空格的文件


 

企业中怎么去安装操作系统
1小批量设备使用U盘安装
（调整bios参数从U盘启动）
2大批量设备搭建PXE装机系统，从网络批量安装
（调整网络启动项，从网络启动）


计划任务不执行怎么办？
首先校验系统时间

1NFS是干嘛的？用什么技术，遇到什么问题
用NFS做nas存储，当用户访问过多时候，会卡。提升交换机配置，将百兆提升到千兆或者万兆，或者将NFS服务器配置bond或者进行网络优化（内核调参及配置bond

2怎么理解存储
存储就是根据不同的应用环境，通过采取合理，安全有效的方式将数据保存在某些介质上，并保证有效的访问，他是数据临时或者长期驻留的物理媒介，保证数据完整性安全 存放的行为和方式

打DF -H 直接卡死，就是挂载的问题，请去查看NFS挂载

FTP的俩种工作模式
主动模式activeftp   被动模式passiveftp
1在主动模式下：FTP客户端随机开启一个大于1024点端口N，向服务器的21端口发起连接，然后开放N+1号端口进行监听，服务器接受到命令后，会用其他本地FTP端口20来链接客户端指定端口n+1 进行传输。
客户端使用1024以上的端口连接服务器的21号端口并且事先开启一个1024+N端口准备让服务器来连接，服务器得知客户端准备的端口后，用20号端口与客户端连接，创建数据链路是server端处于主动去连接客户端的状态，称为主动传输模式。
2在被动模式下，FTP客户端随机开启一个大于1024的端口，向服务器的21号端口发起连接，同时会开启N+1
号端口，然后向服务器发送命令，通知服务器直接处于被动模式。总的来说，主动模式的FTP时指服务器主动连接客户端的数据端口，而被动模式的FTP时指服务器被动的等待客户端连接自己的数据端口

2当用户在浏览器输入一个网站，说说计算机对DNS解析结果流程
注意：本机跟本地的DNS没有缓存
1用户输入网址到浏览器
2浏览器发出dns请求
3计算机首选查询本机host文件，不存在，继续下一步
4计算机按照本地DNS的顺序，向区域DNS服务器查询IP结果，如果区域DNS服务器查询不到，会从根域开始。
5将返回dns结果给本地DNS和主机，本机和本地DNS并缓存本结果，知道TTL过去，才再次查询此结果
6返回IP结果给浏览器，并给本地DNS一份结果；
7浏览器根据IP信息获取页面

我们都知道DNS即采取了TCP协议，又采取了UDP协议，什么时候采取TCP协议？什么时候采取UDP协议？为什么要这么设计？
a 什么时TCP协议？ b什么是UDP协议 c tcp和UDP有什么区别
DNS有俩种情况，一种时区域传输，一种时域名解析
1 区域传输时，一个区中主DNS服务器从自己本身机器的数据文件中读取DNS数据信息，而辅助DNS服务器则从主DNS服务器中读取该区的DNS数据信息，传输协议时TCP
2域名解析时，首选的通讯协议时UDP
使用UDP传输，不经过3次握手，这样DNS服务器负载更低，响应更快。
但是当域名解析反馈长度超过512字节，将不能是u用UDP协议进行解析，此时必须使用TCP

HTTP协议及故障协查
在OSI七层模型中，HTTP协议位于最顶城的应用层中，通过浏览器访问网页就可直接使用了 HTTP协议。使用HTTP
协议时，客户端首先与服务端的80端口建立一个TCP连接，然后在这个连接的基础上进行请求和应答，以及数据的交换。

HTTP有俩个常用版本，分别时HTTP1.0和HTTP1.1。主要区别在于HTTP1.0
中每次请求和应答都会使用一个新的TCP连接，而从HTTP1.1开始，减少了TCP连接的建立和断开，提高了效率

常见的HTTP相应状态码
200：请求被正常处理
204：请求被受理但没有资源可以返回
 20：客户端只是请求资源的一部分，服务器只对请求的部分资源执行GET方法， 相应报文中通过Content-Range指定范围的资源
  301：永久性重定向
  302：临时重定向
  303：与302状态码有相似功能，只是它希望客户端在请求一个URI的时候，能通 过GET方法重定向到另一个URI上
  304：发送附带条件的请求时，条件不满足时返回，与重定向无关
  307：临时重定向，与302类似，只是强制要求使用POST方法
  400：请求报文语法有误，服务器无法识别
  401：请求需要认证
  403：请求的对应资源禁止被访问
  404：服务器无法找到对应资源
  500：服务器内部错误
  503：服务器正忙

如果中了挖矿病毒怎么办
挖矿病毒一般会写入不可删除的计划任务，首先尝试停掉本机计划任务服务 -开启防火墙，讲访问（curl）的网站过滤，并且取消下载脚本的执行权限。【最保险是重装系统】

apache的工作模式？特点，什么情况 下采取不同的工作模式？

1prefork是一种进程，进程区请求处理，冗余小号内存但是稳定。摸个进程出现问题不会影响其他请求，要求稳定是候使用
2worker使用多个子进程，每个子进程有多个线程，使用线程去处理请求，消耗内存小，稳定不好，在访问量多的时候使用
3event为了解决keep-alive 保持长连接工作模式，，不支持用在https
搭建集群要怎么做？
单内 eth0
双内 bond0 【eth0 eth1】
双内 单外   【bond0  eth2】
双外单内    【etn0  bond1 eth1 eth2】
单外eth1
外网（公网）通过公网即可访问到
内部FTP eth0
视频点播（大数据集群运算的服务） 对宽带要求非常高

1首先确认资源---》(机架位置，交换机是否有端口，操作系统版本，IP地址及网络结构)
2安装（重装）操作系统然后初始化服务器--》初始化环境--》
YUM--rpm--源码编译安装
所有数据库服务都是源码装的
3画出架构图--》规划服务机器（那台机器安装哪些服务）设置服务的开机自启及防火墙和selinux关闭
4搭建服务及验证

1台服务器 单内 eth0
给这个机器做bond 现场交换机没口了 你怎么做bond
1调研现场环境--》确认交换机端口及网线
2确认完环境后，查看本机跑的应用服务，是否会影响线上业务，如果会影响线上业务，如果会要在另外一台机器上跑业务，确认本机断网后，不会影响服务
3进行bond配置及验证
4切回服务
5更新CMDB或者excel表格资源信息
 给我搭了一个公司的网站，开发已经写好网页（并且已经给你压缩包）你去上线
 测试环境去测试搭环境--》配置--》测试--》部署到公司的网站上。申请域名--域名备案
 万网--阿里云--申请域名
遇到的问题：开发在他那测试页面完全没问题，但是我自己搭完，页面就是没有。
PHP版本

icmp协议属于tcp/ip协议或者OSI模型的那一层
icmp==internet控制消息协议
该协议是TCP/IP协议集中的一个子协议，属于网络层协议，主要用于在主机与路由之间传递控制信息，
包括报告错误，交换受控限制和状态信息等，当遇到IP数据无法访问没目标，IP路由无法按当前的传输速率转发数据包灯情况是，会自动发送ICMP信息。我们可通过ping命令发送ICMP回应请求信息，并记录收到ICMP回应回复消息，通过这些消息对网络或者主机的故障提供参考依据
你用过几种中间件/web应用服务器软件产品？
中间件；php;php-fpm  php-mysql php-gd php-cli
jsp; tomcat jboss weblogic(oracle)
web产品
apache跨平台，安全性被广泛使用，最流行的web之一
tomcat服务是一个免费开放源代码的web应用
nginx 现在应用最多，效果最好的web服务

7层模型结构
1应用层（Application）
提供应用程序间通信服务  在应用层运行的协议；ftp,dns,telnet,http,rpc,tftp,smtp,snmp
2表示层(Presentation)
定义数据格式及加密
3会话层(Session)
是在俩个节点间建立，维护，和释放会话
4传输层(Transport)
是整个协议层次结构的核心，保证传输的质量（1）
数据分割与重组（2）按端口号寻址（3）连接管理（4）差错控制和流量控制，纠错功能
5网络层(Network)
选路
6数据链路层(Data Link)
数据链路的建立和拆除（铺路）
7物理层（Physical)
为数据端设备提供传送数据的通路，传输数据，完成物理层的一些管理工作，如在数据终端设备，数据通信和交换设备等设备之间完成对数据链路的建立，保持和拆除操作。

服务器IP地址变更
1将本机所有服务停掉，迁移到其他设备。
2提工单给资源分配组-》请求分配新的IP地址且端口不变更--如果有特需的IP段规定，请在工单里标注，我需要10.18.45，X/24这段的IP地址。如果没有标注，其他同事会分配任意端的IP地址---》资源分配组分配下来IP之后--》【a,重新划分交换机的端口的VLAN这个时候机器立马不通了
b 资源分配一旦工单完成后，SSH登陆服务器--》
修改网卡配置文件 修改路由 修改网关--》
重启网络服务--机器不通了--》联系网络工程师进行端口划分--》
本地ping服务器的新IP地址--通了后ssh登陆--》
创建资源回收工单--目的是回收旧的IP--->
修改CMDB系统的信息或excel表格信息。

在公司中划分vlan的过程
1首先确认服务器IP地址段对应的VLAN ID
2确认服务器上联（交换机）端口 一般会让现场拔网线，端口的status是down的时候才会操作
3telnet交换机IP地址进行VLAN操作
4现场插线ping服务器IP进行验证，通了就完成

cookie和session的区别
HTTP是一种无状态的连接，客户端每次读取 web页面时，服务器都会认为这是一次新的会话。但有时候我们又需要持久保持某些信息，比如登陆时的用户名，密码，用户上一次连接时的信息等。这些信息就由cookie和session保存。
cookie
实际上是一小段文本信息。客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个cookie,客户端浏览器会把cookie保存起来，当浏览器再次请求访问该网站时，浏览器吧请求的网站连同该cookie一同提交给服务器，服务器检查该cookie，以此来辨认用户状态。
简单拿来说，cookie的工作原理总结如下
1client连接server
2client生成cookie，再次访问时携带cookie
3server根据cookie的信息识别用户身份
session是服务器端使用的一种记录客户状态的机制，使用上比cookie简单一些。同一个客户端每次和服务端交互是，不需要每次都传回所有的cookie值，而是只要传回一个ID，这个ID是客户端第一次访问服务器的时候生成的，而且每个客户端是唯一的。这样每个客户端就有了一个唯一的ID，客户端只要传回这个ID就行了，这个ID通常是name 为sessionid的一个cookie。session依据这个ID来识别是否为同一用户
cookie和session区别
cookie数据存放在客户的浏览器是，session数据放在服务器上。
cookie不是很安全，别人可以分析存放在本地的cookie并且进行cookie欺骗，考虑到安全应当用session
session会在一定时间内保存在服务器上，当访客真多会比较占用你服务器的性能考虑到减轻服务器性能方面，应当使用cookie。


橙白 橙 绿白 蓝 蓝白  绿 棕白 棕  568b
白绿绿 ，橙白蓝，蓝白橙，白棕棕 568a

TCP三次握手过程
第一次：建立连接时，客户端发送syn包到服务器并进入syn_send状态，等待服务器确认，
第二次：服务器收到SYN包，必须确认客户的SYN9ack=j+1,同时自己也发送一个SYN包，即syn+ack包，此时服务器进入syn_recv状态；
第三次：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK（ack=k+1）此包发送完毕，客户端和服务器进入established状态，完成3次握手 客户端与服务器开始传输数据。